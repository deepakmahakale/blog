<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="apple-touch-icon" sizes="180x180" href="/blog/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/blog/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/blog/favicon-16x16.png">
  <link rel="manifest" href="/blog/site.webmanifest"><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>A step by step guide to upgrade rails 4 application to rails 5 | Deepak’s blog</title>
<meta name="generator" content="Jekyll v4.3.2" />
<meta property="og:title" content="A step by step guide to upgrade rails 4 application to rails 5" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Upgrading an application can be tedious if you don’t have good test coverage. This article covers the common issues you might face while upgrading the from rails 4 to 5." />
<meta property="og:description" content="Upgrading an application can be tedious if you don’t have good test coverage. This article covers the common issues you might face while upgrading the from rails 4 to 5." />
<link rel="canonical" href="https://deepakmahakale.com/blog/2020/07/04/guide-to-upgrade-rails-application.html" />
<meta property="og:url" content="https://deepakmahakale.com/blog/2020/07/04/guide-to-upgrade-rails-application.html" />
<meta property="og:site_name" content="Deepak’s blog" />
<meta property="og:image" content="https://deepakmahakale.com/blog/assets/images/guide-to-upgrade-rails-application.png" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2020-07-04T16:30:00+00:00" />
<meta name="twitter:card" content="summary_large_image" />
<meta property="twitter:image" content="https://deepakmahakale.com/blog/assets/images/guide-to-upgrade-rails-application.png" />
<meta property="twitter:title" content="A step by step guide to upgrade rails 4 application to rails 5" />
<meta name="twitter:site" content="@deepakmahakale" />
<meta name="twitter:creator" content="@deepakmahakale" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2020-07-04T16:30:00+00:00","datePublished":"2020-07-04T16:30:00+00:00","description":"Upgrading an application can be tedious if you don’t have good test coverage. This article covers the common issues you might face while upgrading the from rails 4 to 5.","headline":"A step by step guide to upgrade rails 4 application to rails 5","image":"https://deepakmahakale.com/blog/assets/images/guide-to-upgrade-rails-application.png","mainEntityOfPage":{"@type":"WebPage","@id":"https://deepakmahakale.com/blog/2020/07/04/guide-to-upgrade-rails-application.html"},"url":"https://deepakmahakale.com/blog/2020/07/04/guide-to-upgrade-rails-application.html"}</script>
<!-- End Jekyll SEO tag -->
<link href="https://fonts.googleapis.com/css?family=Montserrat:200,300,400,700|Open+Sans:400,400i,600" rel="stylesheet">
  <link rel="stylesheet" href="/blog/assets/main.css">
  <link rel="stylesheet" href="https://deepakmahakale.com/assets/main.css">
  <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet"><link type="application/atom+xml" rel="alternate" href="https://deepakmahakale.com/blog/feed.xml" title="Deepak's blog" /><!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-WRTX84W');</script>
<!-- End Google Tag Manager -->
</head>
<body><!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-WRTX84W" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->
<div class="menu-button"><button class="hamburger hamburger--spring" type="button"><span class="hamburger-box"><span class="hamburger-inner"></span></span></button></div><script>  var hamburger = document.querySelector('.hamburger');    hamburger.addEventListener('click', function() {    hamburger.classList.toggle('is-active');    document.body.classList.toggle('show-menu');    });</script><div class="menu-wrapper"><nav class="menu"><div class="list-items uppercase">
<a class="underline-effect" href="https://deepakmahakale.com"><span>Home</span></a><br><a class="underline-effect" href="https://deepakmahakale.com/blog"><span>Blog</span></a><br><a class="underline-effect" href="https://deepakmahakale.com/about"><span>About</span></a><br><a class="underline-effect" href="mailto:hello@deepakmahakale.in"><span>Contact</span></a>
</div></nav></div><header class="page-header">
      <div class="wrapper">
        <span class="site-title"><a href="/blog" class="no-style">Deepak's blog</a></span>
      </div>
    </header>

    <main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title" itemprop="name headline">A step by step guide to upgrade rails 4 application to rails 5</h1>
    <p class="post-meta">
      <time datetime="2020-07-04T16:30:00+00:00" itemprop="datePublished">Jul 4, 2020</time>
      
        |
        
          <a href="/blog/tags#rails" class="tag">rails</a>
        
          <a href="/blog/tags#rails-upgrade" class="tag">rails-upgrade</a>
        
      

      
    </p>
  </header>

  <div class="post-content" itemprop="articleBody">
    <p>Upgrading an application can be tedious if you don’t have good test coverage.</p>

<p>This article covers the common issues you might face while upgrading the from rails 4 to 5.</p>

<p>If you are upgrading to ruby 2.7 export <code class="language-plaintext highlighter-rouge">RUBYOPT="-W0"</code> to avoid getting your screen filled up with deprecations warnings</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">export </span><span class="nv">RUBYOPT</span><span class="o">=</span><span class="s2">"-W0"</span>

bundle <span class="nb">exec </span>rspec

<span class="c"># OR use</span>

<span class="nv">RUBYOPT</span><span class="o">=</span><span class="s2">"-W0"</span> bundle <span class="nb">exec </span>rspec
</code></pre></div></div>

<!--more-->

<h2 id="step-1-upgrading-ruby-and-bundle-install">Step 1: Upgrading ruby and bundle install</h2>

<ul>
  <li>
    <p>Install the required ruby version</p>

    <ul>
      <li>
        <p>rvm</p>

        <div class="language-shell highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>rvm <span class="nb">install </span>ruby 2.x.x
</code></pre></div>        </div>
      </li>
      <li>
        <p>rbenv</p>

        <div class="language-shell highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>rbenv <span class="nb">install </span>2.x.x
</code></pre></div>        </div>
      </li>
    </ul>
  </li>
  <li>
    <p>Change the ruby version in <code class="language-plaintext highlighter-rouge">.ruby-version</code>, <code class="language-plaintext highlighter-rouge">.rvmrc</code> or <code class="language-plaintext highlighter-rouge">Gemfile</code>.</p>
  </li>
  <li>
    <p>Install <code class="language-plaintext highlighter-rouge">bundler</code></p>

    <div class="language-shell highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>gem <span class="nb">install </span>bundler
</code></pre></div>    </div>
  </li>
  <li>
    <p>Change the rails version</p>

    <div class="language-ruby highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="c1"># Gemfile</span>
<span class="n">gem</span> <span class="s1">'rails'</span><span class="p">,</span> <span class="s1">'4.2.0'</span>
<span class="c1"># To</span>
<span class="n">gem</span> <span class="s1">'rails'</span><span class="p">,</span> <span class="s1">'5.2.4'</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>run bundle install</p>

    <p>If you don’t need specific versions of the gems locked it is better to remove the specified version.</p>

    <div class="language-shell highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>bundle <span class="nb">install</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>Additional Note: (<code class="language-plaintext highlighter-rouge">ruby 2.7</code>)</p>

    <p>Ruby 2.7 has removed these gems which were default in prior versions.</p>

    <p>Add the following gems to your gemfile</p>

    <div class="language-ruby highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="n">gem</span> <span class="s1">'e2mmap'</span>
<span class="n">gem</span> <span class="s1">'scanf'</span>
<span class="n">gem</span> <span class="s1">'thwait'</span>
</code></pre></div>    </div>
  </li>
</ul>

<h2 id="step-2-config-changes">Step 2: Config changes</h2>

<p>At this point you should be able to install all the dependencies.
But, in order to start the application we need to do some config changes.</p>

<ul>
  <li>
    <p><strong>Remove</strong></p>

    <div class="language-ruby highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="c1"># config/application.rb</span>
<span class="n">config</span><span class="p">.</span><span class="nf">active_record</span><span class="p">.</span><span class="nf">raise_in_transactional_callbacks</span> <span class="o">=</span> <span class="kp">true</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p><strong>Change</strong></p>

    <div class="language-ruby highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="c1"># config/application.rb</span>
<span class="n">config</span><span class="p">.</span><span class="nf">serve_static_assets</span> <span class="o">=</span> <span class="kp">true</span>
<span class="c1"># or</span>
<span class="n">config</span><span class="p">.</span><span class="nf">serve_static_files</span> <span class="o">=</span> <span class="kp">true</span>

<span class="c1"># to</span>
<span class="n">config</span><span class="p">.</span><span class="nf">public_file_server</span><span class="p">.</span><span class="nf">enabled</span>
</code></pre></div>    </div>

    <div class="language-ruby highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="c1"># config/application.rb</span>
<span class="n">config</span><span class="p">.</span><span class="nf">static_cache_control</span> <span class="o">=</span> <span class="s1">'public, max-age=3600'</span>

<span class="c1">#to</span>

<span class="n">config</span><span class="p">.</span><span class="nf">public_file_server</span><span class="p">.</span><span class="nf">headers</span> <span class="o">=</span> <span class="p">{</span> <span class="s1">'Cache-Control'</span> <span class="o">=&gt;</span> <span class="s1">'public, max-age=3600'</span> <span class="p">}</span>
</code></pre></div>    </div>

    <div class="language-ruby highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="c1"># routes.rb</span>
<span class="no">ProjectName</span><span class="o">::</span><span class="no">Application</span><span class="p">.</span><span class="nf">routes</span><span class="p">.</span><span class="nf">draw</span> <span class="k">do</span>

<span class="c1"># to</span>

<span class="no">Rails</span><span class="p">.</span><span class="nf">application</span><span class="p">.</span><span class="nf">routes</span><span class="p">.</span><span class="nf">draw</span> <span class="k">do</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p><strong>Create</strong> <code class="language-plaintext highlighter-rouge">config/initializers/assets.rb</code></p>

    <div class="language-ruby highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="c1"># config/initializers/assets.rb</span>
<span class="no">Rails</span><span class="p">.</span><span class="nf">application</span><span class="p">.</span><span class="nf">config</span><span class="p">.</span><span class="nf">assets</span><span class="p">.</span><span class="nf">version</span> <span class="o">=</span> <span class="s1">'1.0'</span>

<span class="no">Rails</span><span class="p">.</span><span class="nf">application</span><span class="p">.</span><span class="nf">config</span><span class="p">.</span><span class="nf">assets</span><span class="p">.</span><span class="nf">precompile</span> <span class="o">+=</span> <span class="p">[</span>
  <span class="s1">'application.css'</span><span class="p">,</span> <span class="s1">'application.js'</span>
<span class="p">]</span>
</code></pre></div>    </div>
  </li>
</ul>

<h2 id="step-3-model--controller-changes">Step 3: Model &amp; Controller changes</h2>

<h3 id="controllers">Controllers</h3>

<ul>
  <li>
    <p>Replace all <code class="language-plaintext highlighter-rouge">*_filter</code> callbacks in favor of <code class="language-plaintext highlighter-rouge">*_action</code></p>

    <div class="language-ruby highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="n">before_filter</span>
<span class="n">skip_before_filter</span>

<span class="c1"># to</span>

<span class="n">before_action</span>
<span class="n">skip_before_action</span>
</code></pre></div>    </div>

    <div class="language-ruby highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="n">redirect_to</span><span class="p">(</span><span class="ss">:back</span><span class="p">)</span>

<span class="c1"># to</span>

<span class="n">redirect_back</span><span class="p">(</span><span class="ss">fallback_location: </span><span class="n">root_path</span><span class="p">)</span>
</code></pre></div>    </div>
  </li>
</ul>

<h3 id="models">Models</h3>

<ul>
  <li>
    <p>Models now inherit from <code class="language-plaintext highlighter-rouge">ApplicationRecord</code></p>

    <ul>
      <li>
        <p><strong>Create</strong></p>

        <div class="language-ruby highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="c1"># app/models/application_record.rb</span>
<span class="k">class</span> <span class="nc">ApplicationRecord</span> <span class="o">&lt;</span> <span class="no">ActiveRecord</span><span class="o">::</span><span class="no">Base</span>
  <span class="nb">self</span><span class="p">.</span><span class="nf">abstract_class</span> <span class="o">=</span> <span class="kp">true</span>
<span class="k">end</span>
</code></pre></div>        </div>
      </li>
      <li>
        <p><strong>Change</strong> the following in all models</p>

        <div class="language-ruby highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">User</span> <span class="o">&lt;</span> <span class="no">ActiveRecord</span><span class="o">::</span><span class="no">Base</span>

<span class="c1"># to</span>

<span class="k">class</span> <span class="nc">User</span> <span class="o">&lt;</span> <span class="no">ApplicationRecord</span>
</code></pre></div>        </div>
      </li>
    </ul>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">belongs_to</code> is compulsory now.</p>

    <p>Use <code class="language-plaintext highlighter-rouge">optional: true</code> if the association is ever going to be <code class="language-plaintext highlighter-rouge">nil</code></p>

    <div class="language-ruby highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Post</span> <span class="o">&lt;</span> <span class="no">ActiveRecord</span><span class="o">::</span><span class="no">Base</span>
  <span class="n">belongs_to</span> <span class="ss">:user</span><span class="p">,</span> <span class="ss">optional: </span><span class="kp">true</span>
  <span class="c1">#....</span>
</code></pre></div>    </div>

    <p><img class="emoji" title=":information_source:" alt=":information_source:" src="https://github.githubassets.com/images/icons/emoji/unicode/2139.png" height="20" width="20"> <strong>In a huge application you might want to keep the old behavior.
You can change the settings globally in application.rb</strong></p>

    <div class="language-ruby highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="c1"># config/application.rb</span>
<span class="n">config</span><span class="p">.</span><span class="nf">active_record</span><span class="p">.</span><span class="nf">belongs_to_required_by_default</span> <span class="o">=</span> <span class="kp">false</span>
</code></pre></div>    </div>

    <div class="language-ruby highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="n">after_destroy</span> <span class="ss">:send_confirmation</span><span class="p">,</span> <span class="ss">if: </span><span class="s1">'user&amp;.notifications_enabled?'</span>

<span class="n">after_destroy</span> <span class="ss">:send_confirmation</span><span class="p">,</span> <span class="ss">if: </span><span class="no">Proc</span><span class="p">.</span><span class="nf">new</span> <span class="p">{</span> <span class="n">user</span><span class="o">&amp;</span><span class="p">.</span><span class="nf">notifications_enabled?</span> <span class="p">}</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>attribute_changed? is deprecated in after_save callback</p>

    <blockquote>
      <p>Deprecated: <attribute>_changed? doesn't work as expected in after_save &amp; after_update <br>
Use saved_change_to_<attribute>?</attribute></attribute></p>
    </blockquote>

    <div class="language-ruby highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="c1"># Old</span>
<span class="n">after_save</span> <span class="ss">:send_email</span><span class="p">,</span> <span class="ss">if: :email_changed?</span>

<span class="c1"># New</span>
<span class="n">after_save</span> <span class="ss">:send_email</span><span class="p">,</span> <span class="ss">if: </span><span class="o">-&gt;</span> <span class="p">{</span> <span class="n">saved_change_to_email?</span> <span class="p">}</span>
</code></pre></div>    </div>

    <blockquote>
      <p>Deprecated: <attribute>_was doesn't work as expected in after_save &amp; after_update <br>
Use <attribute>_before_last_save</attribute></attribute></p>
    </blockquote>

    <div class="language-ruby highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="c1"># Old</span>
<span class="n">archived_record</span><span class="p">.</span><span class="nf">assign_attributes</span><span class="p">(</span><span class="ss">email: </span><span class="n">email_was</span><span class="p">)</span>

<span class="c1"># New</span>
<span class="n">archived_record</span><span class="p">.</span><span class="nf">assign_attributes</span><span class="p">(</span><span class="ss">email: </span><span class="n">email_before_last_save</span><span class="p">)</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>AASM if you’re upgrading aasm from 3 -&gt; 4</p>

    <p>Follow this guide - <a href="https://github.com/aasm/aasm/blob/master/README_FROM_VERSION_3_TO_4.md" target="_blank">Upgrading AASM from version 3 to 4</a></p>
  </li>
</ul>

<h3 id="mailers">Mailers</h3>

<ul>
  <li>
    <p>Mailers now inherit from ApplicationMailer</p>

    <div class="language-ruby highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="c1"># app/mailers/application_mailer.rb</span>
<span class="k">class</span> <span class="nc">ApplicationMailer</span> <span class="o">&lt;</span> <span class="no">ActionMailer</span><span class="o">::</span><span class="no">Base</span>
  <span class="n">default</span> <span class="ss">from: </span><span class="s2">"sample@</span><span class="si">#{</span><span class="no">ActionMailer</span><span class="o">::</span><span class="no">Base</span><span class="p">.</span><span class="nf">smtp_settings</span><span class="p">[</span><span class="ss">:domain</span><span class="p">]</span><span class="si">}</span><span class="s2">"</span>
<span class="k">end</span>
</code></pre></div>    </div>

    <div class="language-ruby highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">UserMailer</span> <span class="o">&lt;</span> <span class="no">ActionMailer</span><span class="o">::</span><span class="no">Base</span>
<span class="c1"># to</span>
<span class="k">class</span> <span class="nc">UserMailer</span> <span class="o">&lt;</span> <span class="no">ApplicationMailer</span>
</code></pre></div>    </div>
  </li>
</ul>

<h2 id="step-4-migration-changes">Step 4: Migration changes</h2>

<blockquote>
  <p>Directly inheriting from ActiveRecord::Migration is not supported.<br>
Please specify the Rails release the migration was written for:</p>
</blockquote>

<ul>
  <li>
    <p>Change the following</p>

    <div class="language-ruby highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">CreateUsers</span> <span class="o">&lt;</span> <span class="no">ActiveRecord</span><span class="o">::</span><span class="no">Migration</span>

<span class="c1"># to</span>

<span class="k">class</span> <span class="nc">CreateUsers</span> <span class="o">&lt;</span> <span class="no">ActiveRecord</span><span class="o">::</span><span class="no">Migration</span><span class="p">[</span><span class="mf">4.2</span><span class="p">]</span>
</code></pre></div>    </div>

    <p><img class="emoji" title=":information_source:" alt=":information_source:" src="https://github.githubassets.com/images/icons/emoji/unicode/2139.png" height="20" width="20"> <strong>Easy fix</strong></p>

    <div class="language-bash highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="nb">grep</span> <span class="nt">-rl</span> <span class="s2">"ActiveRecord::Migration$"</span> db | xargs <span class="nb">sed</span> <span class="nt">-i</span> <span class="s2">"s/ActiveRecord::Migration/ActiveRecord::Migration[4.2]/g"</span>
</code></pre></div>    </div>
  </li>
</ul>

<h2 id="step-5-necessary-changes-in-rspec">Step 5: Necessary changes in RSpec</h2>

<h3 id="rspec">RSpec</h3>

<ul>
  <li>
    <p>Upgrading FactoryBot to 5</p>

    <blockquote>
      <p>DEPRECATION WARNING: Static attributes will be removed in FactoryBot 5.0.<br>
Please use dynamic attributes instead by wrapping the attribute value
in a block:</p>
    </blockquote>

    <div class="language-ruby highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="no">FactoryBot</span><span class="p">.</span><span class="nf">define</span> <span class="k">do</span>
  <span class="n">factory</span> <span class="ss">:user</span> <span class="k">do</span>
    <span class="nb">name</span> <span class="s1">'John'</span>         <span class="c1"># Bad &amp; will throw error</span>
    <span class="c1"># To</span>
    <span class="nb">name</span> <span class="p">{</span> <span class="s1">'John'</span> <span class="p">}</span>     <span class="c1"># Good</span>
</code></pre></div>    </div>

    <p><img class="emoji" title=":information_source:" alt=":information_source:" src="https://github.githubassets.com/images/icons/emoji/unicode/2139.png" height="20" width="20"> <strong>Easy Fix:</strong></p>

    <p>use <code class="language-plaintext highlighter-rouge">rubocop</code> to auto fix the format</p>

    <p>Ref: <a href="https://thoughtbot.com/blog/deprecating-static-attributes-in-factory_bot-4-11" target="_blank">https://thoughtbot.com/blog/deprecating-static-attributes-in-factory_bot-4-11</a></p>

    <div class="language-shell highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>rubocop <span class="nt">-a</span> spec/factories/xyz.rb <span class="nt">--only</span> FactoryBot/AttributeDefinedStatically
</code></pre></div>    </div>

    <p>Make sure to comment the following in <code class="language-plaintext highlighter-rouge">rubocop.yml</code> temporarily</p>

    <div class="language-yml highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="na">AllCops</span><span class="pi">:</span>
  <span class="na">Exclude</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s1">'</span><span class="s">spec/**/*'</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>Fix controller specs</p>

    <div class="language-ruby highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="n">get</span> <span class="ss">:show</span><span class="p">,</span> <span class="ss">id: </span><span class="n">request</span><span class="p">.</span><span class="nf">id</span>
<span class="n">xhr</span> <span class="ss">:get</span><span class="p">,</span> <span class="ss">:summary</span><span class="p">,</span> <span class="ss">id: </span><span class="n">request</span><span class="p">.</span><span class="nf">id</span>

<span class="c1"># to</span>

<span class="n">get</span> <span class="ss">:show</span><span class="p">,</span> <span class="ss">params: </span><span class="p">{</span> <span class="ss">id: </span><span class="n">request</span><span class="p">.</span><span class="nf">id</span> <span class="p">}</span>
<span class="n">get</span> <span class="ss">:summary</span><span class="p">,</span> <span class="ss">params: </span><span class="p">{</span> <span class="ss">id: </span><span class="n">request</span><span class="p">.</span><span class="nf">id</span> <span class="p">},</span> <span class="ss">xhr: </span><span class="kp">true</span>
</code></pre></div>    </div>

    <p><img class="emoji" title=":information_source:" alt=":information_source:" src="https://github.githubassets.com/images/icons/emoji/unicode/2139.png" height="20" width="20"> This gem does it for you - <a href="https://github.com/tjgrathwell/rails5-spec-converter" target="_blank">rails5-spec-converter</a></p>
  </li>
</ul>

<h2 id="additional-issues-you-might-get-while-running-rspec">Additional Issues you might get while running RSpec</h2>

<ul>
  <li>
    <p>undefined method ‘sort’ for <code class="language-plaintext highlighter-rouge">#&lt;ActionController::Parameters:&gt;</code></p>

    <p>Do not use Hash methods on params</p>
  </li>
</ul>

  </div>
  
  <div id="disqus_thread"></div>
  <script>
    var disqus_config = function () {
      this.page.url = "https://deepakmahakale.com/blog/2020/07/04/guide-to-upgrade-rails-application.html";
      this.page.identifier = "/2020/07/04/guide-to-upgrade-rails-application.html";
      this.page.title = "A step by step guide to upgrade rails 4 application to rails 5";
    };
    (function() {
      var d = document, s = d.createElement('script');
      s.src = '//deepakmahakale-blog.disqus.com/embed.js';
      s.setAttribute('data-timestamp', +new Date());
      (d.head || d.body).appendChild(s);
    })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a>
</noscript>



</article>

      </div>
    </main><div class="bottom">
<div class="contact wrapper"><div class="social">
<h6>Social Media</h6>
<div class="divider"></div>
<ul class="no-style footer-links">
<li><a href="https://twitter.com/deepakmahakale" rel="me" target="_blank" title="deepakmahakale">Twitter</a></li>
<li><a href="https://www.facebook.com/deepakmahakale1" rel="me" target="_blank" title="deepakmahakale1">Facebook</a></li>
<li><a href="https://www.instagram.com/deepakmahakale" rel="me" target="_blank" title="deepakmahakale">Instagram</a></li>
<li><a href="https://github.com/deepakmahakale" rel="me" target="_blank" title="deepakmahakale">GitHub</a></li>
<li><a href="https://www.linkedin.com/in/deepakmahakale" rel="me" target="_blank" title="deepakmahakale">LinkedIn</a></li>
<li><a href="https://stackoverflow.com/users/4758119/deepak-mahakale" rel="me" target="_blank" title="4758119/deepak-mahakale">Stack Overflow</a></li>
</ul>
<ul class="social-media-list">
<li><a href="https://twitter.com/deepakmahakale" rel="me" target="_blank" title="deepakmahakale"><svg class="svg-icon grey"><use xlink:href="/blog/assets/social-icons.svg#twitter"></use></svg></a></li>
<li><a href="https://www.facebook.com/deepakmahakale1" rel="me" target="_blank" title="deepakmahakale1"><svg class="svg-icon grey"><use xlink:href="/blog/assets/social-icons.svg#facebook"></use></svg></a></li>
<li><a href="https://www.instagram.com/deepakmahakale" rel="me" target="_blank" title="deepakmahakale"><svg class="svg-icon grey"><use xlink:href="/blog/assets/social-icons.svg#instagram"></use></svg></a></li>
<li><a href="https://github.com/deepakmahakale" rel="me" target="_blank" title="deepakmahakale"><svg class="svg-icon grey"><use xlink:href="/blog/assets/social-icons.svg#github"></use></svg></a></li>
<li><a href="https://www.linkedin.com/in/deepakmahakale" rel="me" target="_blank" title="deepakmahakale"><svg class="svg-icon grey"><use xlink:href="/blog/assets/social-icons.svg#linkedin"></use></svg></a></li>
<li><a href="https://stackoverflow.com/users/4758119/deepak-mahakale" rel="me" target="_blank" title="4758119/deepak-mahakale"><svg class="svg-icon grey"><use xlink:href="/blog/assets/social-icons.svg#stackoverflow"></use></svg></a></li>
</ul>
</div></div>
<div class="clearfix"></div>
</div><footer class="site-footer"><ul class="footer-links uppercase">
<li><a href="https://deepakmahakale.com">Home</a></li>
<li><a href="https://deepakmahakale.com/blog">Blog</a></li>
<li><a href="https://deepakmahakale.com/about">About</a></li>
<li><a href="mailto:hello@deepakmahakale.in">Contact</a></li>
</ul>
<span class="copyright">© 2023 DEEPAK MAHAKALE</span></footer><script src="https://code.jquery.com/jquery-3.5.0.min.js" integrity="sha256-xNzN2a4ltkB44Mc/Jz3pT4iU1cmeR0FkXs4pru/JxaQ=" crossorigin="anonymous"></script>
<script>
  $("#slideshow > div:gt(0)").hide();
  setInterval(function() {
    $('#slideshow > div:first')
      .fadeOut(1000)
      .next()
      .delay(1100)
      .fadeIn(1000)
      .end()
      .appendTo('#slideshow');
  },  10000);
</script>
</body>

</html>
